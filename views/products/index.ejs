<%- include('../partials/header') %>
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Products <a href="/products/new" class="btn btn-sm btn-primary">New</a></h2>
        <form class="d-flex" method="get" action="/products">
            <select name="supplier" class="form-select me-2">
      <option value="">All suppliers</option>
      <% suppliers.forEach(s => { %>
        <option value="<%= s._id %>" <%= supplierFilter == s._id ? 'selected' : '' %>><%= s.name %></option>
      <% }) %>
    </select>
            <button class="btn btn-outline-secondary">Filter</button>
        </form>
    </div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Name</th>
                <th>Price</th>
                <th>Qty</th>
                <th>Supplier</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <% products.forEach(p => { %>
                <tr>
                    <td>
                        <%= p.name %>
                    </td>
                    <td>
                        <%= p.price %>
                    </td>
                    <td>
                        <%= p.quantity %>
                    </td>
                    <td>
                        <%= p.supplierId ? p.supplierId.name : 'â€”' %>
                    </td>
                    <td>
                        <a href="/products/edit/<%= p._id %>" class="btn btn-sm btn-secondary">Edit</a>
                        <form action="/products/delete/<%= p._id %>" method="post" style="display:inline">
                            <button class="btn btn-sm btn-danger" onclick="return confirm('Delete?')">Delete</button>
                        </form>
                    </td>
                </tr>
                <% }) %>
        </tbody>
    </table>
    <%- include('../partials/footer') %>